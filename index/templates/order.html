{%extends 'qianduan.html'%}
{%block title%}
修改单位
{%endblock%}
{% block style %}
    <style>
    #addCustomer{
    font-weight: bold;
    margin-top: 15px;
    list-style: none;
    cursor:pointer;
    color: white;
    text-decoration:none ;
    background-color: #614cf3;
    text-align: left;
    font-size: 20px;
    }
    #change_show{
        cursor: pointer;
    }
    #float_status{
        background-color: white;
         width: 50px;
         height: 220px;
        border:1px solid #131313;
        position: absolute;
        right: 84px;
        top: 144px;
        display: none;
        cursor:pointer;

    }
    </style>
{% endblock %}
{% block body %}
     <div>
            <a href="{% url 'order:addOrder' %}" id="addOrder">增加订单</a>
        </div>
    <div>
{#    月份：#}
{#            <select name='uchoice'>#}
{#            {% ifequal custMess.uchoice "纸质发票" %}#}
{##}
{#                  <option value ="纸质发票">纸质发票</option>#}
{#                  <option value ="电子发票">电子发票</option>#}
{#            {% else %}#}
{#                  <option value ="电子发票">电子发票</option>#}
{#                  <option value ="纸质发票">纸质发票</option>#}
{#            {% endifequal %}#}
{#            </select>#}
    订单状态：
            <select onchange="window.location=this.value;">
             <option value ="/order">所有状态</option>
            {% for key,value in dic.items %}
                {% ifequal status key %}
                     <option value ="/order/status/{{ key }}" selected>{{ value }}</option>
                     {% else %}
                    <option value ="/order/status/{{ key }}">{{ value }}</option>
                {% endifequal %}
            {% endfor %}
            </select>
    </div>
   <table border="1" class="gridtable">
    <tr>

        <th>接单时间</th>
        <th>联系方式</th>
        <th>客户姓名</th>
        <th>客户单位</th>
        <th>客户税号</th>
        <th>要求</th>
        <th>数量</th>
        <th>未打完</th>
        <th>开票员</th>
        <th>截止时间</th>
        <th>发票类型</th>
        <th >状态</th>
        <th >拿取方式</th>
        <th >地址</th>
        <th>点子</th>
        <th>应收</th>
        <th>实收</th>
        <th>预计成本</th>
        <th>实际成本</th>
        <th>预计利润</th>
        <th>实际利润</th>
        <th>修改</th>
        <th>删除</th>
            </tr>
    <div id="table_body">
    {% for i in userCust %}
        <tr>
            <th>{{ i.startTime }}</th>
            <th>{{ i.customer.uname }}</th>
            <th>{{ i.customer.uwei }}</th>
            <th>{{ i.unit.uname }}</th>
            <th>{{ i.unit.upwd }}</th>
            <th>{{ i.explain }}</th>
            <th>{{ i.count }}</th>
            <th>{{ i.notComple }}</th>
            <th>{{ i.source.uname }}</th>
            <th>{{ i.endTime }}</th>
            <th>{{ i.style }}</th>
            <th id="order_style{{ i.id }}">{{ i.status }}</th>
            <th >{{ i.Delivery }}</th>
            <th >{{ i.customer.uaddres }}</th>
            <th>{{ i.customer.uTax }}</th>
            <th>{{ i.recivable }}</th>
            <th>{{ i.netReceiots }}</th>
            <th>{{ i.estimateCost }}</th>
            <th>{{ i.actualCost }}</th>
            <th>{{ i.estimatProfit }}</th>
            <th>{{ i.actualProfit }}</th>
            <th><a href="{% url 'order:modifyOrder' i.customer.id %}">修改</a></th>
            <th><a href="/order/deletSource/{{ i.id }}">删除</a></th>
        </tr>
    {% endfor %}
    </div>


</table>
{% endblock %}
{% block end %}
    <script>
    $(function () {
    });
    //动态改变状态颜色
     $("#float_status p").mouseover(function () {
        $("#float_status p").eq($(this).index()).css("color","red");
    });
     $("#float_status p").mouseout(function () {
        $("#float_status p").eq($(this).index()).css("color","#0F0F0F");
    });
     $.get(
            '/order/getStatus',
            function(data){
                $.each(data,function(i,obj){
                    var str_oreder='#order_style'+obj.pk;
                    var order_style=$(str_oreder).text();
                    if(order_style=='未安排'){
                    $(str_oreder).css('color','#272822');
                    }else if(order_style=='已安排'){
                    $(str_oreder).css('color','orange');
                    }else if(order_style=='待寄出'){
                    $(str_oreder).css('color','blue');
                    }else if(order_style=='待付款'){
                    $(str_oreder).css('color','red');
                    }else{
                    $(str_oreder).css('color','#4B9A2D');
                }
                                })
            },
            'json'
            );
    </script>
{% endblock %}